(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(38),c=a.n(o),l=a(4),s=a(29),i=a(5),m=a(6),u=a(7),d=a(8),p=(a(78),a(50)),f=a.n(p),h=a(28),g=a(9),E=function(e){if("undefined"!==typeof window)return localStorage.removeItem("lemur_zone_jwt"),e(),fetch("".concat("http://134.122.61.197/api","/logout"),{method:"GET"}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},b=function(){return"undefined"!==typeof window&&(!!localStorage.getItem("lemur_zone_jwt")&&JSON.parse(localStorage.getItem("lemur_zone_jwt")))},v=function(e,t){return fetch("".concat("http://134.122.61.197/api","/user/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e.response)}))},_=a(62),N=a(106),y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).showSidebar=function(){e.setState({sidebar:"show-sidebar"})},e.hideSidebar=function(){e.setState({sidebar:""})},e.redirectToAccount=function(e){return window.location.href="/user/".concat(e)},e.profileDropDown=function(t){return r.a.createElement(N.a,null,r.a.createElement(N.a.Toggle,{id:"dropdown-custom-components"},r.a.createElement(h.c,{size:30,"data-toggle":"tooltip",title:"My profile"})),r.a.createElement(N.a.Menu,null,r.a.createElement(N.a.Item,{eventKey:"1"},r.a.createElement("li",{onClick:function(){return e.redirectToAccount(b().user._id)}},b().user.name," Profile")),r.a.createElement(N.a.Item,{eventKey:"3"},r.a.createElement(g.h,{onClick:function(){return E((function(){return t.push("/")}))},size:25,color:"orangeRed","data-toggle":"tooltip",title:"Sign Out"}))))},e.isLinkActive=function(e,t){return e.location.pathname===t?{color:"#00DA9E"}:{color:"#fff"}},e.renderNavbar=function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"nav"},r.a.createElement("div",{className:"nav-center"},r.a.createElement("div",{className:"nav-header"},r.a.createElement("img",{src:f.a,alt:"",className:"nav-logo"}),r.a.createElement(_.a,{className:"nav-menu",onClick:e.showSidebar})),b()?r.a.createElement("ul",{className:"nav-links"},r.a.createElement("li",null,r.a.createElement("a",{href:"/",style:e.isLinkActive(t,"/")},"Home")),r.a.createElement("li",null,r.a.createElement("a",{href:"/post/new",style:e.isLinkActive(t,"/post/new")},"Tweet")),r.a.createElement("li",null,r.a.createElement("a",{href:"/find-people",style:e.isLinkActive(t,"/find-people")},"Follows")),r.a.createElement("li",null,r.a.createElement("a",{href:"/all-users",style:e.isLinkActive(t,"/all-users")},"Users")),r.a.createElement("li",null,e.profileDropDown(t))):r.a.createElement("ul",{className:"nav-links"},r.a.createElement("li",null,r.a.createElement(l.b,{to:"/login",style:e.isLinkActive(t,"/login")},"Sign In")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/register",style:e.isLinkActive(t,"/register")},"Sign Up"))))),r.a.createElement("aside",{className:"sidebar ".concat(e.state.sidebar)},r.a.createElement("div",null,r.a.createElement(h.d,{className:"close-btn",onClick:e.hideSidebar}),b()?r.a.createElement("ul",{className:"sidebar-links"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Home")),r.a.createElement("li",{className:"sidebar-links-profile",onClick:function(){return e.redirectToAccount(b().user._id)}},"Profile"),r.a.createElement("li",null,r.a.createElement("a",{href:"/post/new"},"Tweet")),r.a.createElement("li",null,r.a.createElement("a",{href:"/all-users"},"Users")),r.a.createElement("li",null,r.a.createElement("a",{href:"/find-people"},"Follows")),r.a.createElement("li",null,r.a.createElement(g.h,{onClick:function(){return E((function(){return t.push("/")}))},size:60,className:"sidebar-links-logout","data-toggle":"tooltip",title:"Log Out"}))):r.a.createElement("ul",{className:"sidebar-links"},r.a.createElement("li",null,r.a.createElement("a",{href:"/login"},"Sign In")),r.a.createElement("li",null,r.a.createElement("a",{href:"/register"},"Sign Up"))))))},e.state={toggle:!1,sidebar:""},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderNavbar(this.props.history))}}]),a}(n.Component),w=Object(s.g)(y),S=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null),r.a.createElement("div",{className:""},e.children))},j=(a(85),a(86),a(34)),k=a.n(j),C=a(30),O=a.n(C),I=function(e){console.log("POST",e);var t=e.post,a=t.postedBy?"/user/".concat(t.postedBy._id):"",n=t.postedBy?t.postedBy.name:" Unknown ";return r.a.createElement("article",{className:"post-card"},r.a.createElement("div",{className:"post-card__header"},r.a.createElement("img",{onError:function(e){return e.target.src="".concat(O.a)},src:"".concat("http://134.122.61.197/api","/user/photo/").concat(t.postedBy._id,"?").concat((new Date).getTime()),alt:t.postedBy.name}),r.a.createElement("span",null,"by ",r.a.createElement(l.b,{to:"".concat(a)},n," "),"on ",new Date(t.created).toDateString())),r.a.createElement("img",{onError:function(e){return e.target.src="".concat(k.a)},src:"".concat("http://134.122.61.197/api","/post/photo/").concat(t._id),alt:t.title}),r.a.createElement("div",{className:"post-card__footer"},r.a.createElement("span",null,r.a.createElement(g.b,{size:20})," ",t.likes.length," "),r.a.createElement(l.b,{to:"/post/".concat(t._id)},r.a.createElement("h4",null,t.title)),r.a.createElement("p",{className:""},t.body.substring(0,100)),r.a.createElement(l.b,{to:"/post/".concat(t._id),className:""},"Read More ...")))},T=function(){return fetch("".concat("http://134.122.61.197/api","/posts"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},F=function(e){return fetch("".concat("http://134.122.61.197/api","/post/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},x=function(e,t,a){return fetch("".concat("http://134.122.61.197/api","/post/like"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},P=function(e,t,a){return fetch("".concat("http://134.122.61.197/api","/post/unlike"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},D=function(e,t,a,n){return fetch("".concat("http://134.122.61.197/api","/post/comment"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a,comment:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},A=function(e,t,a,n){return fetch("".concat("http://134.122.61.197/api","/post/uncomment"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a,comment:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={posts:[]},e.fetchAllPosts=function(){T().then((function(t){t.error?console.log(t.error):(console.log(t),e.setState({posts:t.posts}))}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchAllPosts()}},{key:"render",value:function(){var e=this.state.posts;return r.a.createElement("section",{className:"section-allpost"},r.a.createElement("div",{className:"section-allpost__header"},r.a.createElement("h1",{className:""},"Recent ",r.a.createElement("span",null,"Posts"))),r.a.createElement("article",{className:"section-allpost__container"},e.map((function(e,t){return r.a.createElement(I,{post:e,key:t})}))))}}]),a}(r.a.Component),U=a(18),B=a(22),L=a.n(B),M=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){return function(a){e.setState(Object(U.a)({},t,a.target.value))}},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state;(function(e){return fetch("".concat("http://134.122.61.197/api","/register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})({name:a.name,email:a.email,password:a.password}).then((function(t){t.error?e.setState({error:t.error}):e.setState({name:"",email:"",password:"",error:"",success:t.message})}))},e.renderForm=function(t,a,n){return r.a.createElement("div",{className:"container-fluid ".concat(L.a.section__register)},r.a.createElement("div",{className:L.a.register__form},r.a.createElement("h5",{className:L.a.register__formHeader},"Sign Up"),e.displayErrors(),r.a.createElement("form",{onSubmit:e.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name",className:"text-muted"},"Username"),r.a.createElement("input",{onChange:e.handleInputChange("name"),type:"text",name:"name",className:"form-control",value:t,autoComplete:"off"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email",className:"text-muted"},"Your Email"),r.a.createElement("input",{onChange:e.handleInputChange("email"),type:"email",name:"email",className:"form-control",value:a,autoComplete:"off"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password",className:"text-muted"},"Your Password"),r.a.createElement("input",{onChange:e.handleInputChange("password"),type:"password",name:"password",className:"form-control",value:n,autoComplete:"off"})),r.a.createElement("button",{className:"btn btn-block btn-outline-secondary"},"SIGN UP")),r.a.createElement("p",{className:"mt-3"},r.a.createElement("small",{className:"text-muted"},"Already have an account ? Please",r.a.createElement(l.b,{to:"/login",className:"text-secondary"}," Sign In")))))},e.displayErrors=function(){return e.state.error?r.a.createElement("div",{className:L.a.errorMsg},r.a.createElement("span",null,e.state.error)):e.state.success?r.a.createElement("div",{className:L.a.successMsg},r.a.createElement("span",null,e.state.success," "),r.a.createElement(l.b,{to:"/login"},r.a.createElement("p",null,"Log In"))):void 0},e.state={name:"",email:"",password:"",error:"",success:""},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.password;return this.renderForm(t,a,n)}}]),a}(n.Component),G=(a(87),function(){return r.a.createElement("div",{className:"spinner-section"},r.a.createElement("div",{className:"spinner__container"},r.a.createElement("div",{className:"spinner-grow",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))}),R=a(65),J=a.n(R),H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).responseGoogle=function(t){console.log(t);var a=t.profileObj;(function(e){return fetch("".concat("http://134.122.61.197/api","/social-login/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return console.log("signin response: ",e),e.json()})).catch((function(e){return console.log(e)}))})({password:a.googleId,name:a.name,email:a.email,imageUrl:a.imageUrl}).then((function(t){var a,n;console.log("signin data: ",t),t.error?console.log("Error Login. Please try again.."):(console.log("signin success - setting jwt: ",t),a=t,n=function(){e.setState({redirectToReferrer:!0})},"undefined"!==typeof window&&(localStorage.setItem("lemur_zone_jwt",JSON.stringify(a)),n()))}))},e.state={redirectToReferrer:!1},e}return Object(m.a)(a,[{key:"render",value:function(){return this.state.redirectToReferrer?r.a.createElement(s.a,{to:"/"}):r.a.createElement(J.a,{clientId:"947299159026-82tm0sccl916kunuoffupnnv1ffiblr4.apps.googleusercontent.com ",buttonText:"Sign with Google",onSuccess:this.responseGoogle,onFailure:this.responseGoogle})}}]),a}(n.Component),V=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){return function(a){e.setState(Object(U.a)({},t,a.target.value))}},e.handleFormSubmit=function(t){t.preventDefault(),e.setState({loading:!0});var a=e.state;(function(e){return fetch("".concat("http://134.122.61.197/api","/login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})({email:a.email,password:a.password}).then((function(t){var a,n;t.error?(console.log(t),e.setState({error:t.error,loading:!1})):(e.setState({email:"",password:"",error:""}),a=t,n=function(){e.setState({redirectToReferer:!0})},"undefined"!==typeof window&&(localStorage.setItem("lemur_zone_jwt",JSON.stringify(a)),n()))})).catch((function(e){return console.log(e.response)}))},e.renderForm=function(t,a){return r.a.createElement("div",{className:L.a.login__form},r.a.createElement("h5",{className:L.a.login__formHeader},"Sign In"),e.displayErrors(),r.a.createElement("form",{onSubmit:e.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email",className:"text-muted"},"Your Email"),r.a.createElement("input",{onChange:e.handleInputChange("email"),type:"email",name:"email",className:"form-control",value:t,autoComplete:"off"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password",className:"text-muted"},"Your Password"),r.a.createElement("input",{onChange:e.handleInputChange("password"),type:"password",name:"password",className:"form-control",value:a,autoComplete:"off"})),r.a.createElement("div",{className:L.a.googlebtn},r.a.createElement(H,null)),r.a.createElement("button",{className:"btn btn-block btn-outline-secondary"},"SIGN IN")),r.a.createElement("p",{className:"mt-3"},r.a.createElement("small",{className:"text-muted"},"Not already have an account ? Please",r.a.createElement(l.b,{to:"/register",className:"text-secondary"}," Sign Up"))))},e.displayErrors=function(){if(e.state.error)return r.a.createElement("div",{className:L.a.errorMsg},r.a.createElement("span",null,e.state.error))},e.state={email:"",password:"",error:"",redirectToReferer:!1,loading:!1},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.redirectToReferer,o=e.loading;return n?r.a.createElement(s.a,{to:"/home"}):r.a.createElement("div",{className:"container-fluid ".concat(L.a.section__login)},o?r.a.createElement(G,null):this.renderForm(t,a))}}]),a}(n.Component),W=(a(88),a(19)),Y=a.n(W),q=function(e,t){return fetch("".concat("http://134.122.61.197/api","/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ".concat(t)}}).then((function(e){return e.json()}))},K=function(e,t,a){return fetch("".concat("http://134.122.61.197/api","/user/backgroundPhoto/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},Q=function(e,t,a){return fetch("".concat("http://134.122.61.197/api","/user/follow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ".concat(t)},body:JSON.stringify({userId:e,followId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},X=function(e,t,a){return fetch("".concat("http://134.122.61.197/api","/user/unfollow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ".concat(t)},body:JSON.stringify({userId:e,unfollowId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},Z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={users:[],error:void 0,open:!1,followMsg:void 0},e.clickFollow=function(t,a){var n=b().user._id,r=b().token;Q(n,r,t._id).then((function(n){if(n.error)console.log(n.error),e.setState({error:n.error});else{console.log(n);var r=e.state.users;r.splice(a,1),e.setState({users:r,open:!0,followMsg:"You're following ".concat(t.name," now")})}}))},e.renderUsers=function(t){return r.a.createElement(r.a.Fragment,null,t.map((function(t,a){return r.a.createElement("article",{key:a,className:"friends-card"},r.a.createElement("div",{className:"friends-card__img"},r.a.createElement("img",{onError:function(e){return e.target.src="".concat(Y.a)},src:"".concat("http://134.122.61.197/api","/user/photo/").concat(t._id),alt:t.name}),r.a.createElement(l.b,{to:"/user/".concat(t._id)},t.name)),r.a.createElement("div",null),r.a.createElement("button",{onClick:function(){return e.clickFollow(t,a)},className:"btn-green"},"follow"))})))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(e,t){return fetch("".concat("http://134.122.61.197/api","/user/findpeople/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(b().user._id,b().token).then((function(t){t.error?console.log(t):e.setState({users:t.data})}))}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.open,n=e.followMsg;return r.a.createElement("div",{className:"section-friends"},r.a.createElement("div",{className:"section-friends__header"},r.a.createElement("h1",null,"Who To ",r.a.createElement("span",null,"Follow")),a&&r.a.createElement("span",null,n)),r.a.createElement("div",{className:"section-friends__content"},t?this.renderUsers(t):r.a.createElement(G,null)))}}]),a}(n.Component),$=(a(89),a(45)),ee=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).renderUsers=function(e){return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement("div",{key:e._id,className:"user-card"},r.a.createElement("div",{className:"user-card__img"},r.a.createElement("img",{onError:function(e){return e.target.src="".concat(Y.a)},src:"".concat("http://134.122.61.197/api","/user/photo/").concat(e._id),alt:e.name})),r.a.createElement("div",{className:"user-card__body"},r.a.createElement("div",{className:"user-card__body-item"},r.a.createElement(h.b,{size:"20"}),r.a.createElement(l.b,{to:"/user/".concat(e._id)},e.name)),r.a.createElement("div",{className:"user-card__body-item"},r.a.createElement($.b,{size:"20"}),r.a.createElement("p",null,e.email)),r.a.createElement("div",{className:"user-card__body-item"},r.a.createElement($.a,{size:"20",className:""}),r.a.createElement("p",null,"".concat(new Date(e.created).toDateString().substring(3))))))})))},e.state={users:[]},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("http://134.122.61.197/api","/users"),{method:"GET"}).then((function(e){return e.json()})).then((function(t){t.error?console.log(t.error):(console.log(t),e.setState({users:t.users}))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"section-users"},r.a.createElement("div",{className:"section-users__header"},r.a.createElement("h1",null,"Find more ",r.a.createElement("span",null,"friends"))),r.a.createElement("div",{className:"section-users__content"},this.state.users?this.renderUsers(this.state.users):r.a.createElement(G,null)))}}]),a}(n.Component),te=a(67),ae=a(66),ne=a.n(ae),re=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={redirect:!1},e.deleteProfile=function(){var t=b().token,a=e.props.userId;v(t,a).then((function(t){t?console.log(t):(E((function(){console.log("logged Out SUCCESSFULLY")})),e.setState({redirect:!0}))}))},e.confirmPopUp=function(){window.confirm("We are sad to leave you ".concat(b().user.name,", see you next time!"))&&e.deleteProfile()},e}return Object(m.a)(a,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(s.a,{to:"/"}):r.a.createElement(g.c,{"data-toggle":"tooltip",title:"Delete Account",onClick:this.confirmPopUp,size:25})}}]),a}(r.a.Component),oe=(a(90),function(e){return r.a.createElement("div",{className:"d-inline-block"},e.following?r.a.createElement("button",{onClick:function(){e.clickFollowButton(X)},className:"btn-green"},"unfollow"):r.a.createElement("button",{onClick:function(){e.clickFollowButton(Q)},className:"btn-green"},"follow"))}),ce=(a(91),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(m.a)(a,[{key:"render",value:function(){console.log(this.props);var e=this.props,t=e.following,a=e.followers;return r.a.createElement("div",{className:"tabs"},r.a.createElement("div",{className:"tabs__followers"},r.a.createElement("h6",null,"FOLLOWERS"),r.a.createElement("hr",null),a.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{className:"tabs__followers-img",onError:function(e){return e.target.src="".concat(Y.a)},src:"".concat("http://134.122.61.197/api","/user/photo/").concat(e._id)}),r.a.createElement(l.b,{to:"/user/".concat(e._id)},r.a.createElement("p",{className:"tabs__followers-link"},e.name)))}))),r.a.createElement("div",{className:"tabs__following"},r.a.createElement("h6",null,"FOLLOWING"),r.a.createElement("hr",null),t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{className:"tabs__following-img",onError:function(e){return e.target.src="".concat(Y.a)},src:"".concat("http://134.122.61.197/api","/user/photo/").concat(e._id)}),r.a.createElement(l.b,{to:"/user/".concat(e._id)},r.a.createElement("p",{className:"tabs__followers-link"},e.name)))}))))}}]),a}(n.Component)),le=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).postsCard=function(e){return e.map((function(e){return r.a.createElement("div",{key:e._id,className:"card mb-2 mr-3 border-0",style:{maxWidth:"540px"}},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-md-4 p-3"},r.a.createElement("img",{onError:function(e){return e.target.src="".concat(k.a)},src:"".concat("http://134.122.61.197/api","/post/photo/").concat(e._id,"?").concat((new Date).getTime()),className:"img-thumbnail mb-1",alt:e.title,style:{width:"100%",height:"70px",objectFit:"cover"}})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"card-body"},r.a.createElement(l.b,{to:"/post/".concat(e._id),className:"text-secondary"},r.a.createElement("p",{className:"card-title m-0"},e.title)),r.a.createElement("small",{className:"card-text"},e.body.substring(0,50)," ..."),r.a.createElement("p",{className:"card-text m-0"},r.a.createElement("small",{className:"text-muted"},"on ",new Date(e.created).toDateString()))))))}))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.posts?this.postsCard(this.props.posts):r.a.createElement(G,null))}}]),a}(n.Component),se=(a(92),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={title:""},e.handleChange=function(t){return function(a){var n="photo"===t?a.target.files[0]:a.target.value;e.photoData.set(t,n)}},e.handleSubmit=function(t){t.preventDefault();var a=b().user._id,n=b().token;K(a,n,e.photoData).then((function(e){e.error?console.log(e.error):console.log("BACKGROUND IMAGE",e)}))},e.renderForm=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("input",{type:"file",name:"photo",accept:"image/*",onChange:e.handleChange("photo")}),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-info"},"SAVE"))))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.photoData=new FormData}},{key:"render",value:function(){return r.a.createElement("div",{className:"section-backgroundForm"},r.a.createElement("div",{className:"backgroundForm__container"},this.renderForm()))}}]),a}(n.Component)),ie=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).checkFollow=function(e){var t=b();return e.followers.find((function(e){return e._id===t.user._id}))},e.clickFollowButton=function(t){t(b().user._id,b().token,e.state.user._id).then((function(t){t.error?e.setState({error:t}):e.setState({user:t,following:!e.state.following})}))},e.getUserInfos=function(t){var a=b().token;q(t,a).then((function(t){if(t.error)e.setState({redirectToHome:!0});else{var a=e.checkFollow(t);e.setState({user:t,following:a})}}))},e.aboutComponent=function(t,a,n,o,c,s,i){return r.a.createElement("div",{className:"profile__card"},r.a.createElement("div",{className:"d-flex"},r.a.createElement(g.k,{size:20}),r.a.createElement("div",{className:"ml-3"},a)),r.a.createElement("div",{className:"d-flex"},r.a.createElement(g.i,{size:20}),r.a.createElement("div",{className:"ml-3"},s)),r.a.createElement("div",{className:"d-flex"},r.a.createElement(g.e,{size:20}),r.a.createElement("div",{className:"ml-3"},o||r.a.createElement("small",null,"-"))),r.a.createElement("div",{className:"d-flex"},r.a.createElement(g.f,{size:20}),r.a.createElement("div",{className:"ml-3"},c||r.a.createElement("small",null,"-"))),r.a.createElement("div",{className:"mb-3"},r.a.createElement("small",null,"Joined on ".concat(new Date(i).toDateString()))),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex flex-row justify-content-between"},r.a.createElement("span",{className:"mr-3"},"followers",r.a.createElement("span",{className:"badge badge-warning ml-1",style:{fontSize:"14px"}},e.state.user?e.state.user.followers.length:"0")),r.a.createElement("span",{className:""},"Following",r.a.createElement("span",{className:"badge badge-warning ml-1",style:{fontSize:"14px"}},e.state.user?e.state.user.following.length:"0"))),r.a.createElement("hr",null),r.a.createElement("div",{className:""},r.a.createElement("div",{className:"mt-3 mb-3"},n)),r.a.createElement("hr",null),r.a.createElement("div",null,b().user&&b().user._id===t?r.a.createElement("div",{className:"d-flex flex-row justify-content-around"},r.a.createElement(re,{userId:t}),r.a.createElement(l.b,{to:"/user/edit/".concat(t)},r.a.createElement(g.d,{size:25,color:"grey","data-toggle":"tooltip",title:"Edit Profile"})),r.a.createElement(l.b,{to:"/post/new"},r.a.createElement(g.j,{size:25,color:"grey","data-toggle":"tooltip",title:"Tweet"}))):r.a.createElement(oe,{following:e.state.following,clickFollowButton:e.clickFollowButton})))},e.renderAbout=function(){e.setState({About:!0,followComp:!1,postComp:!1,message:!1})},e.renderFollow=function(){e.setState({followComp:!0,postComp:!1})},e.renderPosts=function(){e.setState({followComp:!1,postComp:!0})},e.getUsersPosts=function(t){(function(e,t){return fetch("".concat("http://134.122.61.197/api","/posts/by/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(t,b().token).then((function(t){t.error?console.log(t.error):e.setState({posts:t})}))},e.displayBackgroundPhotoPopup=function(){return e.setState({popup:!e.state.popup})},e.renderPopUp=function(){return r.a.createElement(se,null)},e.renderUserInfos=function(t,a,n,o,c,l,s,i){return r.a.createElement("section",{className:"profile__container"},r.a.createElement("div",{className:"profile__container-img",style:{backgroundImage:"url(".concat(ne.a,")")}},"\xa0",r.a.createElement(te.a,{onClick:e.displayBackgroundPhotoPopup,className:"camera-icon"})),r.a.createElement("img",{onError:function(e){return e.target.src="".concat(Y.a)},src:i,alt:"profile"}),r.a.createElement("div",{className:"profile__container-about"},e.state.About?e.aboutComponent(t,a,n,o,c,l,s):r.a.createElement(G,null),r.a.createElement("div",{className:"profile__banner"},r.a.createElement("div",{className:"profile__banner-items"},r.a.createElement("div",{className:"profile__banner-items__item",onClick:e.renderFollow},r.a.createElement("p",null,"Follows")),r.a.createElement("div",{className:"profile__banner-items__item",onClick:e.renderPosts},r.a.createElement("p",null,"Posts"))),r.a.createElement("div",{className:"profile__banner-content"},e.state.followComp?r.a.createElement(ce,{followers:e.state.user.followers,following:e.state.user.following,isPage:e.state.isPage}):r.a.createElement(le,{posts:e.state.posts})))))},e.state={user:{following:[],followers:[]},redirectToHome:!1,About:!0,followComp:!1,postComp:!1,messageComp:!1,following:!1,error:"",isPage:!1,popup:!1,posts:[]},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;this.getUserInfos(e),this.getUsersPosts(e)}},{key:"componentDidUpdate",value:function(e){e.location.key!==this.props.location.key&&window.location.reload()}},{key:"render",value:function(){if(this.state.redirectToHome)return r.a.createElement(s.a,{to:"/login"});var e=this.state.user,t=e._id,a=e.name,n=e.about,o=e.address,c=e.website,l=e.email,i=e.created,m=t?"".concat("http://134.122.61.197/api","/user/photo/").concat(t,"?").concat((new Date).getTime()):Y.a;return r.a.createElement(r.a.Fragment,null,this.state.popup?this.renderPopUp():null,this.state.user?this.renderUserInfos(t,a,n,o,c,l,i,m):r.a.createElement(G,null))}}]),a}(n.Component),me=(a(93),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).getUserInfos=function(t){var a=b().token;q(t,a).then((function(t){t.error?console.log(t.error):e.setState({id:t._id,name:t.name,email:t.email,about:t.about,address:t.address,website:t.website})}))},e.handleInputChange=function(t){return function(a){var n;e.setState({error:""});var r="photo"===t?a.target.files[0]:a.target.value,o="photo"===t?a.target.files[0].size:0;e.userData.set(t,r),e.setState((n={},Object(U.a)(n,t,r),Object(U.a)(n,"fileSize",o),n))}},e.backFunction=function(){return e.props.history.goBack()},e.handleFormSubmit=function(t){(t.preventDefault(),e.isInputValid())&&function(e,t,a){return console.log("UPDATE",a),fetch("".concat("http://134.122.61.197/api","/user/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e.props.match.params.userId,b().token,e.userData).then((function(t){t.error?(console.log(t.error),e.setState({error:t.error})):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("lemur_zone_jwt")){var a=JSON.parse(localStorage.getItem("lemur_zone_jwt"));a.user=e,localStorage.setItem("lemur_zone_jwt",JSON.stringify(a)),t()}}(t.user,(function(){e.setState({redirectToProfile:!0,success:t.message})}))}))},e.renderForm=function(t,a,n,o,c,l,s){return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"section__header"},r.a.createElement("h1",null,"EDIT ",r.a.createElement("span",null,"PROFILE")),r.a.createElement("span",null,e.state.error?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.l,{color:"orangeRed",size:25})," ",e.state.error):"")),r.a.createElement("div",{className:"section__container"},r.a.createElement("img",{onError:function(e){return e.target.src="".concat(Y.a)},src:s,alt:t}),r.a.createElement("form",{onSubmit:e.handleFormSubmit},r.a.createElement("div",{className:"section__container-form_item"},r.a.createElement("label",{htmlFor:"file"},"Choose an image"),r.a.createElement("input",{onChange:e.handleInputChange("photo"),type:"file",className:"form-control input-file",accept:"image/*"})),r.a.createElement("div",{className:"section__container-form_item"},r.a.createElement(g.f,{size:20}),r.a.createElement("input",{onChange:e.handleInputChange("website"),type:"text",name:"website",value:c,autoComplete:"off"})),r.a.createElement("div",{className:"section__container-form_item"},r.a.createElement(g.k,{size:20}),r.a.createElement("input",{onChange:e.handleInputChange("name"),type:"text",name:"name",value:t,autoComplete:"off"})),r.a.createElement("div",{className:"section__container-form_item"},r.a.createElement(g.i,{size:20}),r.a.createElement("input",{onChange:e.handleInputChange("email"),type:"email",name:"email",value:a})),r.a.createElement("div",{className:"section__container-form_item"},r.a.createElement(g.a,{size:20}),r.a.createElement("input",{onChange:e.handleInputChange("address"),type:"text",name:"address",value:o})),r.a.createElement("div",{className:"section__container-form_item"},r.a.createElement(g.g,{size:20}),r.a.createElement("input",{onChange:e.handleInputChange("password"),type:"text",name:"password",value:l,placeholder:"New password"})),r.a.createElement("div",{className:"section__container-form_textarea"},r.a.createElement("textarea",{onChange:e.handleInputChange("about"),name:"about",placeholder:"Your description",value:n})),r.a.createElement("div",{className:"section__container-form_btn"},r.a.createElement("button",{className:"btn-green"},"UPDATE"),r.a.createElement("button",{onClick:e.backFunction,className:"btn-green"},"CANCEL")))))},e.isInputValid=function(){var t=e.state,a=t.name,n=t.email,r=t.password;return t.fileSize>2e5?(e.setState({error:"Photo should be less than 200kb(2Mb)"}),!1):0===a.length?(e.setState({error:"Name is require!"}),!1):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(n)?!(r.length>=1&&r.length<=5)||(e.setState({error:"Password must be at least 6 characters!"}),!1):(e.setState({error:"Email must be www@email.com format!"}),!1)},e.state={id:"",name:"",email:"",password:"",address:"",website:"",about:"",error:"",success:"",fileSize:0,redirectToProfile:!1,loading:!1},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.userData=new FormData;var e=this.props.match.params.userId;this.getUserInfos(e)}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.name,n=e.about,o=e.address,c=e.website,l=e.email,i=e.password,m=e.redirectToProfile,u=t?"".concat("http://134.122.61.197/api","/user/photo/").concat(t,"?").concat((new Date).getTime()):Y.a;return m?r.a.createElement(s.a,{to:"/user/".concat(t)}):r.a.createElement(r.a.Fragment,null,a||l?this.renderForm(a,l,n,o,c,i,u):r.a.createElement(G,null))}}]),a}(n.Component)),ue=a(71),de=function(e){var t=e.component,a=Object(ue.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return b()?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},pe=(a(94),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){return function(a){var n;e.setState({error:""});var r="photo"===t?a.target.files[0]:a.target.value,o="photo"===t?a.target.files[0].size:0;e.postData.set(t,r),e.setState((n={},Object(U.a)(n,t,r),Object(U.a)(n,"postImgSize",o),n))}},e.handleSubmit=function(t){(t.preventDefault(),e.setState({loading:!0}),e.isInputValid())&&function(e,t,a){return fetch("".concat("http://134.122.61.197/api","/post/new/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(b().user._id,b().token,e.postData).then((function(t){t.error?e.setState({error:t.error}):(console.log("NEW POST",t),e.setState({redirectToProfile:!0,loading:!1,title:"",body:""}))}))},e.renderForm=function(){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("label",{htmlFor:"file"},r.a.createElement("input",{onChange:e.handleChange("photo"),type:"file",name:"photo",accept:"image/*",size:"40"}),"Choose an image "),r.a.createElement("input",{onChange:e.handleChange("title"),value:e.state.title,type:"text",name:"title",placeholder:"Need a tweet title",autoComplete:"off"}),r.a.createElement("textarea",{onChange:e.handleChange("body"),value:e.state.body,name:"body",cols:"30",rows:"5",className:"",placeholder:"Tape your history"}),r.a.createElement("button",{className:"btn-green"},"Tweet"))},e.isInputValid=function(){var t=e.state,a=t.title,n=t.body;return t.postImgSize>1e6?(e.setState({error:"Image should be less than 1Mg (100Kb)"}),!1):0===a.length?(e.setState({error:"A title is required"}),!1):0!==n.length||(e.setState({error:"Post body is required"}),!1)},e.displayErroMsg=function(){if(e.state.error)return r.a.createElement("div",{className:"error-msg"},r.a.createElement("span",null,r.a.createElement(g.l,{size:25,color:"orangeRed"})," ",e.state.error))},e.state={title:"",body:"",postImgSize:0,error:"",user:{},loading:!1,redirectToProfile:!1},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.postData=new FormData,this.setState({user:b().user})}},{key:"render",value:function(){return this.state.redirectToProfile?r.a.createElement(s.a,{to:"/user/".concat(b().user._id)}):r.a.createElement("section",{className:"section-tweet"},r.a.createElement("div",{className:"section-tweet__header"},r.a.createElement("h1",null,"New ",r.a.createElement("span",null,"Tweet")),this.displayErroMsg()),r.a.createElement("div",{className:"section-tweet__content"},this.renderForm()))}}]),a}(n.Component)),fe=(a(95),a(68)),he=a(46),ge=(a(96),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={text:"",error:""},e.onInputChangeHandler=function(t){e.setState({error:""}),e.setState({text:t.target.value})},e.handleFormSubmit=function(t){if(t.preventDefault(),!b())return e.setState({error:"Please Sign in"}),!1;if(e.isCommentValid()){var a=b().user._id,n=b().token,r=e.props.postId;D(a,n,r,{text:e.state.text}).then((function(t){t.error?console.log(t.error):(e.props.updateComments(t.comments),e.setState({text:""}))}))}},e.removeComment=function(t){var a=b().user._id,n=b().token,r=e.props.postId;A(a,n,r,t).then((function(t){t.error?console.log(t.error):e.props.updateComments(t.comments)}))},e.confirmPopUp=function(t){window.confirm("Are you sure to remove the comment?")&&e.removeComment(t)},e.renderInput=function(){var t=b().user._id;return r.a.createElement("article",{className:"comment__form"},r.a.createElement("img",{className:"",onError:function(e){return e.target.src="".concat(O.a)},src:"".concat("http://134.122.61.197/api","/user/photo/").concat(t),alt:"post",style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}),r.a.createElement("div",{className:"comment__form-input"},r.a.createElement("input",{className:"",onChange:e.onInputChangeHandler,type:"text",name:"comment",autoComplete:"off",placeholder:"   Leave a comment ...",value:e.state.text}),r.a.createElement("button",{className:"btn-green",onClick:e.handleFormSubmit},"Comment")))},e.renderComment=function(t){return t.map((function(t){return r.a.createElement("div",{className:"comment__card",key:t._id},r.a.createElement(l.b,{to:"/user/".concat(t.postedBy._id)},r.a.createElement("img",{className:"float-left mr-3",onError:function(e){return e.target.src="".concat(O.a)},src:"".concat("http://134.122.61.197/api","/user/photo/").concat(t.postedBy._id,"?").concat((new Date).getTime()),alt:t._id,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}})),r.a.createElement("div",{className:"comment__card-content"},r.a.createElement("p",{className:""},t.text),r.a.createElement("span",null,"Posted by:",r.a.createElement(l.b,{to:"/user/".concat(t.postedBy._id)}," ",t.postedBy.name," "),"on ",new Date(t.created).toDateString().substring(3)," | ",new Date(t.created).toLocaleTimeString())),b().user&&b().user._id===t.postedBy._id&&r.a.createElement(g.c,{className:"icon-delete",onClick:function(){e.confirmPopUp(t)}}))}))},e.isCommentValid=function(){var t=e.state.text;return!(!t.length>0||t.length>150)||(e.setState({error:"Comment should be between 1 and 150 characters."}),!1)},e.renderErrorMsg=function(){return r.a.createElement("span",{className:"badge badge-danger"},e.state.error)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.comments;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row flex-column"},this.renderComment(e)),r.a.createElement("div",{className:"row mt-3"},this.renderInput()),r.a.createElement("div",{className:"row justify-content-center mb-5"},this.state.error?this.renderErrorMsg():null))}}]),a}(n.Component)),Ee=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).updateComments=function(t){e.setState({comments:t})},e.isAlreadyLiked=function(e){var t=b()&&b().user._id;return-1!==e.indexOf(t)},e.toggleLikeIconHandler=function(){if(!b())return e.setState({redirectToSignIn:!0}),!1;var t=b().user._id,a=b().token,n=e.props.match.params.postId;(e.state.like?P:x)(t,a,n).then((function(t){t.error?console.log(t.error):(console.log(t),e.setState({like:!e.state.like,likeIcon:!e.state.likeIcon,likes:t.likes.length}))}))},e.renderPost=function(t,a,n,o,c,s,i,m,u){var d=s?"/user/".concat(s._id):"",p=s?s.name:" Unknown ";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-2 row justify-content-between rounded-lg"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("img",{onError:function(e){return e.target.src="".concat(O.a)},src:"".concat("http://134.122.61.197/api","/user/photo/").concat(s._id,"?").concat((new Date).getTime()),alt:s.name,style:{width:"40px",height:"40px",borderRadius:"50%",border:"2px solid rgb(130,138,136)",objectFit:"cover"}}),r.a.createElement("p",{className:"font-italic my-auto ml-2"},r.a.createElement("small",null,r.a.createElement(l.b,{to:"".concat(d)}," ",p," ")))),r.a.createElement("div",null,r.a.createElement(l.b,{to:"/home",className:"align-self-center text-secondary text-muted"},r.a.createElement(fe.a,{size:35}),"Back to posts"))),r.a.createElement("h5",{className:"display-4 font-weight-lighter"},a),r.a.createElement("div",{className:""},r.a.createElement("p",{className:"lead"},n)),r.a.createElement("img",{onError:function(e){return e.target.src="".concat(k.a)},src:"".concat("http://134.122.61.197/api","/post/photo/").concat(t,"?").concat((new Date).getTime()),className:"rounded-top",alt:a,style:{width:"100%",height:"350px",objectFit:"cover"}}),r.a.createElement("div",{className:"card-body rounded-bottom",style:{background:"rgba(130,138,136, .05)"}},r.a.createElement("p",{className:"text-muted m-0"},r.a.createElement("small",null,new Date(o).toDateString().substring(3)),r.a.createElement("small",{className:"ml-2"},new Date(o).toLocaleTimeString())),r.a.createElement("p",{className:"text-muted mb-2"},r.a.createElement("small",null,"Last update ",c?new Date(c).toDateString():"_")),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",null,m?r.a.createElement(he.b,{"data-toggle":"tooltip",title:"like",className:"like-icon",onClick:e.toggleLikeIconHandler}):r.a.createElement(he.a,{"data-toggle":"tooltip",title:"dislike",className:"dislike-icon",onClick:e.toggleLikeIconHandler}),r.a.createElement("span",{className:"badge icon-badge"},i)),r.a.createElement("div",{className:"ml-5"},r.a.createElement(h.a,{className:"comment-icon"}),r.a.createElement("span",{className:"badge icon-badge"},u.length))),r.a.createElement("div",null,b().user&&b().user._id===s._id?r.a.createElement("div",{className:"d-flex flex-row-reverse text-secondary"},r.a.createElement(g.c,{onClick:e.confirmPopUp,size:25,className:"loggedInUser__icon delete","data-toggle":"tooltip",title:"Delete Post"})," Delete",r.a.createElement(l.b,{to:"/post/edit/".concat(t),className:"mr-3",style:{color:"grey"}},"Edit ",r.a.createElement(g.d,{size:27,"data-toggle":"tooltip",title:"Edit Post",className:"loggedInUser__icon edit"}))):null)))},e.deletePost=function(){(function(e,t){return fetch("".concat("http://134.122.61.197/api","/post/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(b().token,e.props.match.params.postId).then((function(t){t.error?console.log(t.error):e.setState({redirect:!0})}))},e.confirmPopUp=function(){window.confirm("Are you sure to delete this post?")&&e.deletePost()},e.state={post:"",redirect:!1,redirectToSignIn:!1,like:!1,likes:0,comments:[]},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.postId;F(t).then((function(t){t.error?console.log(t.error):(console.log("SINGLE POST",t),e.setState({post:t,likes:t.likes.length,like:e.isAlreadyLiked(t.likes),comments:t.comments}))}))}},{key:"render",value:function(){var e=this.state.post,t=e._id,a=e.title,n=e.body,o=e.created,c=e.updated,l=e.postedBy,i=this.state,m=i.likes,u=i.like,d=i.comments;return this.state.redirect?r.a.createElement(s.a,{to:"/home"}):this.state.redirectToSignIn?r.a.createElement(s.a,{to:"/login"}):r.a.createElement("div",{className:"section-post"},this.state.post?this.renderPost(t,a,n,o,c,l,m,u,d):r.a.createElement(G,null),r.a.createElement(ge,{postId:t,comments:d,updateComments:this.updateComments}))}}]),a}(n.Component),be=a(69),ve=a.n(be),_e=(a(97),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).getPost=function(t){b().token;F(t).then((function(t){t.error?console.log(t.error):e.setState({id:t._id,title:t.title,body:t.body,postedBy:t.postedBy})}))},e.handleInputChange=function(t){return function(a){var n;e.setState({error:""});var r="photo"===t?a.target.files[0]:a.target.value,o="photo"===t?a.target.files[0].size:0;e.postData.set(t,r),e.setState((n={},Object(U.a)(n,t,r),Object(U.a)(n,"fileSize",o),n))}},e.backFunction=function(){return e.props.history.goBack()},e.handleFormSubmit=function(t){(t.preventDefault(),e.isInputValid())&&function(e,t,a){return fetch("".concat("http://134.122.61.197/api","/post/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e.state.id,b().token,e.postData).then((function(t){t.error?(console.log(t.error),e.setState({error:t.error})):e.setState({title:"",body:"",redirect:!0})}))},e.isInputValid=function(){var t=e.state,a=t.title,n=t.body;return t.fileSize>1e5?(e.setState({error:"Photo should be less than 100kb(1Mb)"}),!1):0===a.length?(e.setState({error:"Title is require!"}),!1):0!==n.length||(e.setState({error:"Body is require!"}),!1)},e.renderForm=function(t,a,n){return r.a.createElement("form",{onSubmit:e.handleFormSubmit},r.a.createElement("label",{htmlFor:"photo",className:"text-muted"},"Choose an image",r.a.createElement("input",{onChange:e.handleInputChange("photo"),type:"file",className:"form-control input-file",accept:"image/*"})),r.a.createElement("input",{onChange:e.handleInputChange("title"),type:"text",name:"title",className:"form-control",value:a}),r.a.createElement("textarea",{onChange:e.handleInputChange("body"),type:"text",name:"body",className:"form-control",value:n}),r.a.createElement("div",{className:"form-btns"},r.a.createElement("button",{className:"btn-green"},"UPDATE"),r.a.createElement("button",{onClick:e.backFunction,className:"btn-green"},"CANCEL")))},e.displayErrors=function(){if(e.state.error)return r.a.createElement("div",{className:"error-msg"},r.a.createElement("span",null,r.a.createElement(g.l,{size:25,color:"orangeRed"})," ",e.state.error))},e.state={id:"",title:"",body:"",postedBy:"",fileSize:0,redirect:!1,error:""},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.postData=new FormData;var e=this.props.match.params.postId;this.getPost(e)}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.title,n=e.body,o=e.postedBy;return e.redirect?r.a.createElement(s.a,{to:"/user/".concat(o._id)}):r.a.createElement("section",{className:"section-editpost"},r.a.createElement("div",{className:"section-editpost__header"},r.a.createElement("h1",null,"Edit ",r.a.createElement("span",null,"Tweet")),this.displayErrors()),r.a.createElement("div",{className:"section-editpost__content"},r.a.createElement("img",{onError:function(e){return e.target.src="".concat(ve.a)},src:"".concat("http://134.122.61.197/api","/post/photo/").concat(t,"?").concat((new Date).getTime()),alt:a}),this.state.id?this.renderForm(t,a,n):null))}}]),a}(n.Component)),Ne=function(){return r.a.createElement(S,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:z}),r.a.createElement(s.b,{path:"/home",component:z}),r.a.createElement(s.b,{path:"/register",component:M}),r.a.createElement(s.b,{path:"/login",component:V}),r.a.createElement(de,{path:"/find-people",component:Z}),r.a.createElement(s.b,{path:"/all-users",component:ee}),r.a.createElement(de,{path:"/user/edit/:userId",component:me}),r.a.createElement(de,{path:"/user/:userId",component:ie}),r.a.createElement(de,{path:"/post/new",component:pe}),r.a.createElement(de,{path:"/post/edit/:postId",component:_e}),r.a.createElement(de,{path:"/post/:postId",component:Ee})))},ye=(a(98),function(){return r.a.createElement(l.a,null,r.a.createElement(Ne,null))});a(99);c.a.render(r.a.createElement(ye,null),document.getElementById("root"))},19:function(e,t,a){e.exports=a.p+"static/media/default-avatar.fc6a7475.jpg"},22:function(e,t,a){e.exports={section__register:"User_section__register__1ugVC",register__form:"User_register__form__2WCuK",register__formHeader:"User_register__formHeader__2oN3r",errorMsg:"User_errorMsg__3ZuSX",successMsg:"User_successMsg__3CQFz",section__login:"User_section__login__aoVGG",googlebtn:"User_googlebtn__1dDae",login__form:"User_login__form__14tsD",login__formHeader:"User_login__formHeader__25Dd5",section__editProfile:"User_section__editProfile__275gF"}},30:function(e,t,a){e.exports=a.p+"static/media/avatar.f817a688.png"},34:function(e,t,a){e.exports=a.p+"static/media/tropical-escape.d84c3587.jpg"},50:function(e,t,a){e.exports=a.p+"static/media/sz-logo.0a8f7727.png"},66:function(e,t,a){e.exports=a.p+"static/media/wp.362d508a.jpg"},69:function(e,t,a){e.exports=a.p+"static/media/node.fed36d15.png"},73:function(e,t,a){e.exports=a(100)},78:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},99:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.1ea38bb6.chunk.js.map